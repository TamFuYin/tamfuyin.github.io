---
layout: default
title: arc207
permalink: /blog/arc207/
---

## A

记 $i$ 前面有 $r_i$ 盏灯，那么贡献 $[\sum_{i=1}^n\max(0,a_i-r_i)\le X]$

记 $X'=\sum_{i=1}^na_i-X$，则 $\sum_{i=1}^n\min(a_i,r_i)\ge X'$。

考虑按 $r_i$ 从大到小 DP，如果我们当前选了一个 $a_i<r_i$，那么产生 $a_i$ 的贡献，并且后面不能选这个数；否则，一定产生一个 $r_i$。

我们发现第一种情况很难搞，所以考虑 贡献延后处理，等到 $r_i=a_i$ 再处理这个贡献，而且我们也不考虑具体选了那个 $a_i$，只是记一下选了多少个还没有确定的数。

状态数和转移数都是 $O(N^4)$，竟然跑得过。。。

## B

这种题一般都是构造一个二分图这样的好分析的图，我们构造一个满二分图，左边是 $[1,n/2]$ 右边是 $[n/2+1,n]$，如果是偶数，那么删掉 $i$ 和 $n+1-i$ 的边；否则，删掉 $i$ 和 $n-i$ 的边。

这样每个点只会够不到一个点。

## C

~~好像在 UOJ 做过的样子，貌似是一个很巧妙的 DP。~~

注意到，如果固定 $r$，那么使得 $[l,r]$ 的 or sum 不同的 $l$，只有 $\log$ 个。

然后直接做就完了？？

## D

总共会操作 $n+m-2$ 轮。

考虑「模仿」？

先手取什么，后手就在对面取什么。

那么，当 $n$ 和 $m$ 皆为奇数时，后手一定有策略取到中间的那个数。因此只要中间的那个数是 $0$ 则后手必胜。

否则，后手会在同一侧取，这样即可把中心偏移一格，且保证「当 $n$ 和 $m$ 皆为奇数」不变。

因此先手会尽量向也是 $1$ 的一边取。

...


## E

首先我们把相等的前缀删掉。

对于不同的位置，你发现你只能把这个东西删掉，然后复制一个不知在哪里的东西放到后面。

考虑逆序操作，那么一次操作相当于找到一个与末尾元素相同的位置，然后在左边或者右边插入一个任意元素，然后删掉末尾。

如果你发现没有相同的位置，例如 `000...0001` 的样子，那么不能进行任何操作。

我们至多需要一次操作就能任意控制末尾元素是什么。

我们只要构造一个合法解即可，所以直接做就完了。