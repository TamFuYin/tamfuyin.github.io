---
layout: default
title: IOI 2018 中国国家集训队互测
permalink: /blog/ioi-2018--zhong-guo-guo-jia-ji-xun-dui-hu-ce/
---

# IOI 2018 中国国家集训队互测

## 完美的队列

很好做啊（赞叹

对于每次新增元素，我们需要知道这个元素在所有队列中消失的最早时间，当且仅当对于每个队列，已经 push 过了 $a_i$ 个元素，或者 push 了一个跟这个元素相同的元素。

你离线做，发现均摊复杂度是对的。

## 完美的集合

我去这不就是[希望](https://www.luogu.com.cn/problem/P5291)吗原来省选联考也有搬的原题吗

点边容斥+树上背包

## 完美的旅行

记输入的邻接矩阵为 $A$，那么你想要求出 $A+A^2+A^3+\dots+A^m=\frac{A(1-A^m)}{1-A}$。

万一矩阵没有逆怎么办？

## 神秘货币

不可做题

## 最小方差生成树

很久以前在 GMOJ 做过，当时完全没听懂

注意把你减的那个期望换成一个随便别的数不会使答案更优，所以题意转化如下：

- 把边权统一减去一个相同的数，然后开平方（实际上只需要求绝对值？），求最小生成树

考虑把这个东西视作关于减去的数 $x$ 的函数，不难发现是单谷的凸函数。

所以可以直接三分？

……好像不太对？

其实是一道论文题，详见《国家集训队2018论文集》

## 北校门外的「未来」

找到 u 和 v 之间的最大值 w，则答案为 u 到 w 的前缀最大值的个数加上 v 到 w 的前缀最大值个数。

LCT+粉兔线段树

## 白云的旅行

？这不是直接做就完了吗

## 蒜头的奖杯

矢

## 小修和小栋生♂成树

拟阵？

这就是拟阵吧

那不就是 nlog n 吗

哦哦哦有两张图啊

嘶~~那很难办了

你发现你要求的是两个拟阵的交

emmm 先复习一下拟阵这个东西吧。

## 小修和小栋猜♂数字

考虑随两个数，固定这两个数然后问一遍其他的所有数。

这样，在所有的答案中，最多只有两个数出现了至少两次。

如果没有两个数，说明脸比较黑刚好随到了最小值或最大值或都随到了，也是可以做的。

否则，我们把所有的数分成了三份。

期望情况下，我们只需要问 $O(n\log n)$ 次就可以了。

……等等。这道题的意思是**我没有拿到标算连能拿多少分都不知道吗**

## 小修和小栋玩♂游戏

这道题为什么不做成通信题……

考虑每 $m-1$ 位分一组，每组每个元素分别赋一个 $1,2,\dots,m-1$ 的权值。

考虑 Bob 通过 $1$ 的位置的权值和模 $m$ 的值得到信息。

而 Alice 只要不是每一组的这个位置都不能调整，都能把它调整到信息的值。

这样能做到比较高的分数，但是没有满分。

## 小 H 爱染色

考虑 pgf

## Fim4

首先肯定要对 $qs$ 建 AC 自动机，然后你发现你要加速「走第 $a_i$ 个串」的动作。

发现数据范围比较小，考虑随机撒点，对每个关键点预处理走每个 $s_{a_i}$ 及其后缀会走到哪个点。

然后貌似就做完了 $O(n\sqrt n)$

并非做完，因为预处理不了。

其实是一道论文题，详见《IOI2018中国国家候选队论文集》

## tree

虽然看得不是很懂，但是应该就是 fhq-treap？