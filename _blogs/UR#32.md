---
layout: default
title: UR#32
permalink: /blog/ur32/
---

# UR#32

怎么我什么也没打也会掉 rating

## T1

这不就是正睿的 3382 吗……

根据确实经典的结论，一个排序网络对一个排列是合法的，当且仅当对于所有 $x$，把 $\le x$ 的看作 $0$，$>x$ 的看作 $1$ 之后都是合法的，记一个排列 $p$ 如此操作的结果为 $p_x$

那么，一次 `U` 相当于把第一个 $1$ 移到末尾，一次 `D` 相当于把最后一个 $0$ 移到开头。

显然，一个排列的最小所需年数，即为所有 $p_x$ 的最小所需年数的最大值。

如果一组操作包含 $u$ 个 `U`，$d$ 个 `D`，那么一个 01 序列能够在 $a$ 次内成功排序当且仅当从前往后数第 $au$ 个 `1` 的位置 $>$ 从后往前数第 $ad$ 个 `0` 的位置。

所以答案就是一个组合数。

## T2

怎么刻画「颜色数 $\le 2$ 的区间个数」？

考察所有的极长双色连续段 $[l,r]$，那么可以发现 $l-1$ 和 $r+1$ 与中间一定是不同色的。

考虑如果两个区间 $[a,b]$ 和 $[c,d]$ 有交且不相包含，即 $a<c\le b<d$，则可以发现 $[c,b]$ 一定只有一种颜色，且 $c-1$ 和 $b+1$ 和 $[c,b]$ 的颜色不同。

……等等我好像贩糖了，直接把同色划为一段。

